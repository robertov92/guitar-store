<%- include('../includes/head.ejs') %>
<%- include('../includes/header.ejs') %>
<%- include('../includes/nav.ejs') %>

<!-- breadcrums -->
<div class="container py-4 flex items-center gap-3">
    <%- include('../includes/breadcrum.ejs') %>
    <p class="text-gray-600 font-medium">Shop</p>
</div>

<div class="container">
   <h1><% if (editing) { %>Edit<% } else { %>Add<% } %> Product</h1>
   <form id="add-product" action="/account/<% if (editing) { %>edit-product<% } else { %>add-product<% } %>" method="POST">
      <% if (errorMessage) { %> 
         <div>
            <%= errorMessage %> 
         </div>
      <% } %> 
      <label>Title<br>
      <input class="<%= validationErrors.find(e=>e.param === 'title') ? 'invalid' : '' %>"  
         type="text" name="title" 
         value="<% if (editing || hasError) { %><%= product.title %><% } %>">
      </label><br>
      <label>Stock<br>
         <input class="<%= validationErrors.find(e=>e.param === 'stock') ? 'invalid' : '' %>"  
         type="text" name="stock" 
         value="<% if (editing || hasError) { %><%= product.stock %><% } %>">
      </label><br>
      <label>Brand<br>
         <input class="<%= validationErrors.find(e=>e.param === 'brand') ? 'invalid' : '' %>"  
         type="text" name="brand" 
         value="<% if (editing || hasError) { %><%= product.brand %><% } %>">
      </label><br>
      <label>Category<br>
         <input class="<%= validationErrors.find(e=>e.param === 'category') ? 'invalid' : '' %>"  
         type="text" name="category" 
         value="<% if (editing || hasError) { %><%= product.category %><% } %>">
      </label><br>
      <label>Price<br>
         <input class="<%= validationErrors.find(e=>e.param === 'price') ? 'invalid' : '' %>"  
         type="text" name="price" 
         value="<% if (editing || hasError) { %><%= product.price %><% } %>">
      </label><br>
      <label>Description<br>
         <textarea rows="5" name="description" 
         class="<%= validationErrors.find(e=>e.param === 'description') ? 'invalid' : '' %>"><% if (editing || hasError) { %><%= product.description %><% } %></textarea>
      </label><br>
      <label>Image URL<br>
         <input class="<%= validationErrors.find(e=>e.param === 'imageUrl') ? 'invalid' : '' %>" 
         type="url" name="imageUrl" 
         value="<% if (editing || hasError) { %><%= product.imageUrl %><% } %>">
      </label><br>
      <% if (editing) { %>
         <input type="hidden" value="<%= product._id %>" name="productId">
      <% } %>
      <button class="py-2 px-4 text-center text-white bg-primary border border-primary rounded hover:bg-transparent hover:text-primary transition" type="submit"><% if (editing) { %>Update<% } else { %>Add<% } %> </button>
   </form>
</div>
   
<%- include('../includes/end.ejs') %>